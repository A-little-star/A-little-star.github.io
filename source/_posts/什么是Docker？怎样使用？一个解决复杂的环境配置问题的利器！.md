---
title: 什么是Docker？怎样使用？一个解决复杂的环境配置问题的利器！
abbrlink: d7767099
date: 2023-09-05 20:21:08
tags:
---

# 如何使用Docker？

## 一、Docker是什么？

开发软件时，离不开各种各样的配置和环境，软件对于配置和环境的依赖是非常严重且重要的，又是运行环境稍微不同，代码就不见得能跑起来。如何解决令人头疼的版本、配置问题？

答案是使用Docker。Docker之所以发展如此迅速，也是因为它对此给出了一个标准化的解决方案——系统平滑移植、容器虚拟化技术。

配置环境相当麻烦，换一台机器，就要重来一次，费时费力，很多人想到，能不能从根本上解决问题，软件可以带环境安装？也就是说，安装的时候，把原始环境一模一样地复制过来。开发人员利用Docker可以消除写作编码时“在我的机器上可以正常工作”的问题。

一句话总结，Docker是一个解决了运行环境和配置为题的软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术。

## 二、Docker能用来做什么？

“一次镜像，处处运行”。

Docker容器是在操作系统层面上实现虚拟化，直接复用本地主机的操作系统，而传统虚拟机则是在硬件层面实现虚拟化。与传统的虚拟机相比，Docker优势体现为启动速度快、占用体积小。

### 容器和虚拟机的区别？

虚拟机的缺点：资源占用多、冗余步骤多、启动慢。虚拟机会模拟整个操作系统。

Linux容器（LXC）与虚拟机不同，不需要捆绑一整套操作系统，只需要软件工作所需的库资源和设置。

- 传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整的操作系统，在该系统上再运行所需的应用进程；
- 容器内的应用进程直 接运行于宿主的内核，容器内没有自己的内核**且也没有进行硬件虚拟**。因此容器要比传统虚拟机更为轻便。
- 每个容器之间相互隔离，每个容器  有自己的文件系统，容器之间进程不会相互影响。

## 三、Docker怎么玩？

Docker的三大要素：镜像、容器、仓库。

### 镜像命令

#### 1.查看本地下载的镜像

```bash
docker images
```

#### 2.从远程拉取镜像

```bash
docker pull 镜像名字
```

#### 3.查看镜像/容器/数据卷所占的空间

```bash
docker system df
```

#### 4.删除镜像

```bash
docker rmi 镜像名字/镜像ID
```

#### 5.启动交互式容器

```bash
docker run -it 容器名
```

#### 6.查看当前容器（包括正在运行的和没有运行的）

```bash
docker ps -a
```

#### 7.删除指定容器

```bash
docker rm 容器ID
参数：
-f 强制删除
```

#### 8.退出当前交互式容器

```bash
exit    # 会退出容器
或
ctrl+p+q  # 不会退出容器
```

#### 9.重新接入up状态的容器

```bash
docker exec -it 容器ID   # 会启用一个新的进程，因此exit不会退出容器
docker attach 容器ID   # 接入推出之前的进程，不会启用新的进程，因此exit会退出容器
```

#### 10.启动守护式容器

```bash
docker run -d 容器名
```

#### 11.将容器中的文件拷贝至本地

```bash
docker cp 容器ID:<src dir> <direct dir>
```

#### 12.容器的导入导出（用于备份整个容器）

```bash
docker export 容器ID > xxx.tar # 将容器导出为.tar文件包
cat xxx.tar | docker import - 镜像用户/镜像名：镜像版本号
```

#### 13.将本地的容器提交为镜像

```bash
docker commit -m="提交的描述信息" -a="作者" 容器ID 要创建的目标镜像名:[标签名]
```



### Docker镜像

#### 是什么

采用UnionFS（联合文件系统）层层叠加。所有镜像都有一个父镜像生成，父镜像只包含一些较为底层的内容，子镜像会继承父镜像的内容，并且拓展一些新的内容，所有的镜像就是这样产生的。

镜像分层的最的好处是共享资源，方便复制迁移，就是为了复用。

#### docker commit

```bash
docker commit -m="提交的描述信息" -a="作者" 容器ID 要创建的目标镜像名:[标签名]
```

